# Установка и настройка Nmap

## Содержание
1. [Что такое Nmap](#что-такое-nmap)
2. [Как установить Nmap](#как-установить-nmap)
3. [Проверка установки](#проверка-установки)
4. [Добавление Nmap в PATH](#добавление-nmap-в-path)
5. [Исправление обнаружения Nmap в системе безопасности](#исправление-обнаружения-nmap-в-системе-безопасности)
6. [Решение проблем](#решение-проблем)

## Что такое Nmap
Nmap (Network Mapper) - это мощный инструмент для сканирования сетей и проверки безопасности. Он используется для:
- Обнаружения открытых портов на целевых хостах
- Определения запущенных служб и их версий
- Обнаружения операционных систем
- Запуска скриптов для расширенного тестирования безопасности

## Как установить Nmap

### Способ 1: Установка через PowerShell (рекомендуется)
1. Щелкните правой кнопкой мыши по файлу `Install-Nmap.ps1` и выберите "Запустить с помощью PowerShell"
   * Если потребуется, запустите с правами администратора
2. Следуйте инструкциям в скрипте, отвечая "д" на предложения установить Nmap и python-nmap
3. Добавьте Nmap в PATH, когда скрипт предложит это сделать
4. Перезагрузите компьютер после установки

### Способ 2: Автоматическая установка через Batch
1. Запустите файл `install_and_test_nmap.bat`
2. Выберите опцию 1 (Установить Nmap)
3. Следуйте инструкциям установщика
4. После установки выберите опцию 2 (Установить python-nmap библиотеку)
5. Затем выберите опцию 3 (Протестировать установку Nmap)

### Способ 3: Использование отдельных скриптов
1. Запустите файл `install_nmap.bat`
2. Следуйте инструкциям установщика
3. Запустите `python install_nmap_python.py` для установки Python-библиотеки
4. Запустите `python test_nmap.py` для проверки установки

### Способ 4: Ручная установка
1. Посетите официальный сайт Nmap: https://nmap.org/download.html
2. Скачайте последнюю версию Nmap для Windows
3. Запустите скачанный установщик и следуйте инструкциям
4. Убедитесь, что опция установки WinPcap/Npcap включена (необходима для некоторых функций сканирования)
5. Запустите команду `pip install python-nmap` для установки Python-библиотеки

## Проверка установки
После установки Nmap необходимо:
1. **Перезагрузить компьютер** (важно!)
2. Запустить файл `test_nmap.py` с помощью команды `python test_nmap.py`
3. Убедиться, что тест показывает успешную установку Nmap и python-nmap

Альтернативный способ проверки:
1. Откройте командную строку (cmd) или PowerShell
2. Выполните команду `nmap -V`
3. Если команда выполнена успешно, Nmap установлен правильно

## Добавление Nmap в PATH
Если Nmap установлен, но не найден в PATH системы:

### Через PowerShell (проще):
1. Запустите `Install-Nmap.ps1` с правами администратора
2. Когда скрипт спросит "Добавить Nmap в переменную PATH?", введите "д"

### Через скрипт Python:
1. Запустите файл `fix_nmap_detection.py`
2. Скрипт проверит, установлен ли Nmap и найдет его расположение
3. Когда скрипт предложит добавить Nmap в PATH, выберите "д" (да)
4. Будет создан и запущен файл `add_nmap_to_path.bat`

### Вручную:
1. Откройте Параметры системы > О системе > Дополнительные параметры системы
2. Нажмите "Переменные среды"
3. В списке "Системные переменные" найдите переменную "Path" и нажмите "Изменить"
4. Добавьте путь к Nmap (обычно `C:\Program Files\Nmap` или `C:\Program Files (x86)\Nmap`)
5. Нажмите OK для сохранения изменений

После изменения PATH обязательно перезагрузите компьютер.

## Исправление обнаружения Nmap в системе безопасности
Если у вас возникло сообщение "NMAP: Не обнаружен в системе":
1. Убедитесь, что Nmap установлен и добавлен в PATH (см. выше)
2. Запустите файл `fix_nmap_detection.py`
3. Скрипт модифицирует файл `security_tools_integration.py` для улучшения обнаружения Nmap
4. Перезапустите систему безопасности

## Решение проблем

### Ошибка "NMAP: Не обнаружен в системе"
1. Проверьте, установлен ли Nmap, запустив `nmap -V` в командной строке
2. Если команда не найдена, перезагрузите компьютер после установки
3. Если после перезагрузки команда все равно не найдена, запустите `Install-Nmap.ps1` и добавьте Nmap в PATH

### Ошибка при импорте модуля python-nmap
1. Убедитесь, что библиотека python-nmap установлена: `pip install python-nmap`
2. Если ошибка сохраняется, попробуйте переустановить библиотеку: `pip uninstall python-nmap` и затем `pip install python-nmap`

### Ошибки в файле security_tools_integration.py
1. Если вы изменили файл `security_tools_integration.py` и возникли ошибки, восстановите его из резервной копии `security_tools_integration.py.bak`
2. Запустите скрипт `fix_nmap_detection.py` снова

### Ошибки с правами доступа
1. Если при установке или изменении PATH возникают ошибки с правами доступа, запустите скрипты с правами администратора
2. Для PowerShell: щелкните правой кнопкой мыши и выберите "Запустить от имени администратора"
3. Для Batch-файлов: щелкните правой кнопкой мыши и выберите "Запустить от имени администратора"

## Дополнительная информация
- После установки Nmap вы можете использовать его для сканирования портов и поиска уязвимостей
- Примеры использования Nmap доступны в файле README_NMAP.md
- Всегда используйте Nmap только для сканирования систем, на которые у вас есть разрешение

> **Важно**: Использование Nmap для сканирования систем без разрешения может быть незаконным! 